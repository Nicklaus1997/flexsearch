/**!
 * FlexSearch.js v0.8.111 (Bundle)
 * Author and Copyright: Thomas Wilkerling
 * Licence: Apache-2.0
 * Hosted by Nextapps GmbH
 * https://github.com/nextapps-de/flexsearch
 */
var v;function B(a,c,b){const e=typeof b,d=typeof a;if("undefined"!==e){if("undefined"!==d){if(b){if("function"===d&&e===d)return function(k){return a(b(k))};c=a.constructor;if(c===b.constructor){if(c===Array)return b.concat(a);if(c===Map){var f=new Map(b);for(var g of a)f.set(g[0],g[1]);return f}if(c===Set){g=new Set(b);for(f of a.values())g.add(f);return g}}}return a}return b}return"undefined"===d?c:a}function C(){return Object.create(null)}function E(a){return"string"===typeof a}
function H(a){return"object"===typeof a}function J(a,c){if(E(c))a=a[c];else for(let b=0;a&&b<c.length;b++)a=a[c[b]];return a}function aa(a){let c=0;for(let b=0,e;b<a.length;b++)(e=a[b])&&c<e.length&&(c=e.length);return c};var ba=[["\u00aa","a"],["\u00b2","2"],["\u00b3","3"],["\u00b9","1"],["\u00ba","o"],["\u00bc","1\u20444"],["\u00bd","1\u20442"],["\u00be","3\u20444"],["\u00e0","a"],["\u00e1","a"],["\u00e2","a"],["\u00e3","a"],["\u00e4","a"],["\u00e5","a"],["\u00e7","c"],["\u00e8","e"],["\u00e9","e"],["\u00ea","e"],["\u00eb","e"],["\u00ec","i"],["\u00ed","i"],["\u00ee","i"],["\u00ef","i"],["\u00f1","n"],["\u00f2","o"],["\u00f3","o"],["\u00f4","o"],["\u00f5","o"],["\u00f6","o"],["\u00f9","u"],["\u00fa","u"],["\u00fb",
"u"],["\u00fc","u"],["\u00fd","y"],["\u00ff","y"],["\u0101","a"],["\u0103","a"],["\u0105","a"],["\u0107","c"],["\u0109","c"],["\u010b","c"],["\u010d","c"],["\u010f","d"],["\u0113","e"],["\u0115","e"],["\u0117","e"],["\u0119","e"],["\u011b","e"],["\u011d","g"],["\u011f","g"],["\u0121","g"],["\u0123","g"],["\u0125","h"],["\u0129","i"],["\u012b","i"],["\u012d","i"],["\u012f","i"],["\u0133","ij"],["\u0135","j"],["\u0137","k"],["\u013a","l"],["\u013c","l"],["\u013e","l"],["\u0140","l"],["\u0144","n"],
["\u0146","n"],["\u0148","n"],["\u0149","n"],["\u014d","o"],["\u014f","o"],["\u0151","o"],["\u0155","r"],["\u0157","r"],["\u0159","r"],["\u015b","s"],["\u015d","s"],["\u015f","s"],["\u0161","s"],["\u0163","t"],["\u0165","t"],["\u0169","u"],["\u016b","u"],["\u016d","u"],["\u016f","u"],["\u0171","u"],["\u0173","u"],["\u0175","w"],["\u0177","y"],["\u017a","z"],["\u017c","z"],["\u017e","z"],["\u017f","s"],["\u01a1","o"],["\u01b0","u"],["\u01c6","dz"],["\u01c9","lj"],["\u01cc","nj"],["\u01ce","a"],["\u01d0",
"i"],["\u01d2","o"],["\u01d4","u"],["\u01d6","u"],["\u01d8","u"],["\u01da","u"],["\u01dc","u"],["\u01df","a"],["\u01e1","a"],["\u01e3","ae"],["\u00e6","ae"],["\u01fd","ae"],["\u01e7","g"],["\u01e9","k"],["\u01eb","o"],["\u01ed","o"],["\u01ef","\u0292"],["\u01f0","j"],["\u01f3","dz"],["\u01f5","g"],["\u01f9","n"],["\u01fb","a"],["\u01ff","\u00f8"],["\u0201","a"],["\u0203","a"],["\u0205","e"],["\u0207","e"],["\u0209","i"],["\u020b","i"],["\u020d","o"],["\u020f","o"],["\u0211","r"],["\u0213","r"],["\u0215",
"u"],["\u0217","u"],["\u0219","s"],["\u021b","t"],["\u021f","h"],["\u0227","a"],["\u0229","e"],["\u022b","o"],["\u022d","o"],["\u022f","o"],["\u0231","o"],["\u0233","y"],["\u02b0","h"],["\u02b1","h"],["\u0266","h"],["\u02b2","j"],["\u02b3","r"],["\u02b4","\u0279"],["\u02b5","\u027b"],["\u02b6","\u0281"],["\u02b7","w"],["\u02b8","y"],["\u02e0","\u0263"],["\u02e1","l"],["\u02e2","s"],["\u02e3","x"],["\u02e4","\u0295"],["\u0390","\u03b9"],["\u03ac","\u03b1"],["\u03ad","\u03b5"],["\u03ae","\u03b7"],["\u03af",
"\u03b9"],["\u03b0","\u03c5"],["\u03ca","\u03b9"],["\u03cb","\u03c5"],["\u03cc","\u03bf"],["\u03cd","\u03c5"],["\u03ce","\u03c9"],["\u03d0","\u03b2"],["\u03d1","\u03b8"],["\u03d2","\u03a5"],["\u03d3","\u03a5"],["\u03d4","\u03a5"],["\u03d5","\u03c6"],["\u03d6","\u03c0"],["\u03f0","\u03ba"],["\u03f1","\u03c1"],["\u03f2","\u03c2"],["\u03f5","\u03b5"],["\u0439","\u0438"],["\u0450","\u0435"],["\u0451","\u0435"],["\u0453","\u0433"],["\u0457","\u0456"],["\u045c","\u043a"],["\u045d","\u0438"],["\u045e","\u0443"],
["\u0477","\u0475"],["\u04c2","\u0436"],["\u04d1","\u0430"],["\u04d3","\u0430"],["\u04d7","\u0435"],["\u04db","\u04d9"],["\u04dd","\u0436"],["\u04df","\u0437"],["\u04e3","\u0438"],["\u04e5","\u0438"],["\u04e7","\u043e"],["\u04eb","\u04e9"],["\u04ed","\u044d"],["\u04ef","\u0443"],["\u04f1","\u0443"],["\u04f3","\u0443"],["\u04f5","\u0447"]];const ca=/[^\p{L}\p{N}]+/u,da=/(\d{3})/g,ea=/(\D)(\d{3})/g,fa=/(\d{3})(\D)/g,ha="".normalize&&/[\u0300-\u036f]/g;function K(a){if(!this||this.constructor!==K)return new K(...arguments);for(let c=0;c<arguments.length;c++)this.assign(arguments[c])}v=K.prototype;
v.assign=function(a){this.normalize=B(a.normalize,!0,this.normalize);let c=a.include,b=c||a.exclude||a.split,e;if(b||""===b){if("object"===typeof b&&b.constructor!==RegExp){let d="";e=!c;c||(d+="\\p{Z}");b.letter&&(d+="\\p{L}");b.number&&(d+="\\p{N}",e=!!c);b.symbol&&(d+="\\p{S}");b.punctuation&&(d+="\\p{P}");b.control&&(d+="\\p{C}");if(b=b.char)d+="object"===typeof b?b.join(""):b;try{this.split=new RegExp("["+(c?"^":"")+d+"]+","u")}catch(f){this.split=/\s+/}}else this.split=b,e=!1===b||2>"a1a".split(b).length;
this.numeric=B(a.numeric,e)}else{try{this.split=B(this.split,ca)}catch(d){this.split=/\s+/}this.numeric=B(a.numeric,B(this.numeric,!0))}this.prepare=B(a.prepare,null,this.prepare);this.finalize=B(a.finalize,null,this.finalize);ha||(this.mapper=new Map(ba));this.rtl=B(a.rtl,!1,this.rtl);this.dedupe=B(a.dedupe,!1,this.dedupe);this.filter=B((b=a.filter)&&new Set(b),null,this.filter);this.matcher=B((b=a.matcher)&&new Map(b),null,this.matcher);this.mapper=B((b=a.mapper)&&new Map(b),null,this.mapper);this.stemmer=
B((b=a.stemmer)&&new Map(b),null,this.stemmer);this.replacer=B(a.replacer,null,this.replacer);this.minlength=B(a.minlength,1,this.minlength);this.maxlength=B(a.maxlength,0,this.maxlength);if(this.cache=b=B(a.cache,!0,this.cache))this.H=null,this.R="number"===typeof b?b:2E5,this.F=new Map,this.G=new Map,this.L=this.K=128;this.h="";this.M=null;this.D="";this.N=null;if(this.matcher)for(const d of this.matcher.keys())this.h+=(this.h?"|":"")+d;if(this.stemmer)for(const d of this.stemmer.keys())this.D+=
(this.D?"|":"")+d;return this};v.addStemmer=function(a,c){this.stemmer||(this.stemmer=new Map);this.stemmer.set(a,c);this.D+=(this.D?"|":"")+a;this.N=null;this.cache&&L(this);return this};v.addFilter=function(a){this.filter||(this.filter=new Set);this.filter.add(a);this.cache&&L(this);return this};v.addMapper=function(a,c){if("object"===typeof a)return this.addReplacer(a,c);if(1<a.length)return this.addMatcher(a,c);this.mapper||(this.mapper=new Map);this.mapper.set(a,c);this.cache&&L(this);return this};
v.addMatcher=function(a,c){if("object"===typeof a)return this.addReplacer(a,c);if(2>a.length&&(this.dedupe||this.mapper))return this.addMapper(a,c);this.matcher||(this.matcher=new Map);this.matcher.set(a,c);this.h+=(this.h?"|":"")+a;this.M=null;this.cache&&L(this);return this};v.addReplacer=function(a,c){if("string"===typeof a)return this.addMatcher(a,c);this.replacer||(this.replacer=[]);this.replacer.push(a,c);this.cache&&L(this);return this};
v.encode=function(a){if(this.cache&&a.length<=this.K)if(this.H){if(this.F.has(a))return this.F.get(a)}else this.H=setTimeout(L,50,this);this.normalize&&("function"===typeof this.normalize?a=this.normalize(a):a=ha?a.normalize("NFKD").replace(ha,"").toLowerCase():a.toLowerCase());this.prepare&&(a=this.prepare(a));this.numeric&&3<a.length&&(a=a.replace(ea,"$1 $2").replace(fa,"$1 $2").replace(da,"$1 "));const c=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let b=
[],e=this.split||""===this.split?a.split(this.split):a;for(let f=0,g,k;f<e.length;f++)if((g=k=e[f])&&!(g.length<this.minlength))if(c)b.push(g);else if(!this.filter||!this.filter.has(g)){if(this.cache&&g.length<=this.L)if(this.H){var d=this.G.get(g);if(d||""===d){d&&b.push(d);continue}}else this.H=setTimeout(L,50,this);this.stemmer&&2<g.length&&(this.N||(this.N=new RegExp("(?!^)("+this.D+")$")),g=g.replace(this.N,h=>this.stemmer.get(h)),g.length<this.minlength||this.filter&&this.filter.has(g))&&(g=
"");if(g&&(this.mapper||this.dedupe&&1<g.length)){d="";for(let h=0,l="",m,n;h<g.length;h++)m=g.charAt(h),m===l&&this.dedupe||((n=this.mapper&&this.mapper.get(m))||""===n?n===l&&this.dedupe||!(l=n)||(d+=n):d+=l=m);g=d}this.matcher&&1<g.length&&(this.M||(this.M=new RegExp("("+this.h+")","g")),g=g.replace(this.M,h=>this.matcher.get(h)));if(g&&this.replacer)for(d=0;g&&d<this.replacer.length;d+=2)g=g.replace(this.replacer[d],this.replacer[d+1]);this.cache&&k.length<=this.L&&(this.G.set(k,g),this.G.size>
this.R&&(this.G.clear(),this.L=this.L/1.1|0));g&&b.push(g)}this.finalize&&(b=this.finalize(b)||b);this.cache&&a.length<=this.K&&(this.F.set(a,b),this.F.size>this.R&&(this.F.clear(),this.K=this.K/1.1|0));return b};function L(a){a.H=null;a.F.clear();a.G.clear()};function ia(a){M.call(a,"add");M.call(a,"append");M.call(a,"search");M.call(a,"update");M.call(a,"remove")}let N,ja;const O={},P={};function ka(a){N=0;O[a]=P[a]}
function M(a){this[a+"Async"]=function(){const c=arguments;var b=c[c.length-1];let e;"function"===typeof b&&(e=b,delete c[c.length-1]);N||(N=setTimeout(ka,0,a),ja=Date.now());P[a]||(P[a]=O[a]=1E3);if(!--O[a]){O[a]=P[a]=P[a]*this.priority*this.priority*3/(Date.now()-ja)|0||1;N=clearTimeout(N);const f=this;return new Promise(g=>{setTimeout(function(){g(f[a+"Async"].apply(f,c))},0)})}const d=this[a].apply(this,c);b=d.then?d:new Promise(f=>f(d));e&&b.then(e);return b}};function la(a,c=0){let b=[],e=[];c&&(c=25E4/c*5E3|0);for(const d of a.entries())e.push(d),e.length===c&&(b.push(e),e=[]);e.length&&b.push(e);return b}function ma(a,c){c||(c=new Map);for(let b=0,e;b<a.length;b++)e=a[b],c.set(e[0],e[1]);return c}function na(a,c=0){let b=[],e=[];c&&(c=25E4/c*1E3|0);for(const d of a.entries())e.push([d[0],la(d[1])[0]]),e.length===c&&(b.push(e),e=[]);e.length&&b.push(e);return b}
function oa(a,c){c||(c=new Map);for(let b=0,e,d;b<a.length;b++)e=a[b],d=c.get(e[0]),c.set(e[0],ma(e[1],d));return c}function pa(a){let c=[],b=[];for(const e of a.keys())b.push(e),25E4===b.length&&(c.push(b),b=[]);b.length&&c.push(b);return c}function qa(a,c){c||(c=new Set);for(let b=0;b<a.length;b++)c.add(a[b]);return c}
function Q(a,c,b,e,d,f,g=0){const k=e&&e.constructor===Array;var h=k?e.shift():e;if(!h)return this.export(a,c,d,f+1);if((h=a((c?c+".":"")+(g+1)+"."+b,JSON.stringify(h)))&&h.then){const l=this;return h.then(function(){return Q.call(l,a,c,b,k?e:null,d,f,g+1)})}return Q.call(this,a,c,b,k?e:null,d,f,g+1)};R.prototype.add=function(a,c,b){H(a)&&(c=a,a=J(c,this.key));if(c&&(a||0===a)){if(!b&&this.reg.has(a))return this.update(a,c);for(let k=0,h;k<this.field.length;k++){h=this.C[k];var e=this.index.get(this.field[k]);if("function"===typeof h){var d=h(c);d&&e.add(a,d,!1,!0)}else if(d=h.I,!d||d(c))h.constructor===String?h=[""+h]:E(h)&&(h=[h]),ra(c,h,this.J,0,e,a,h[0],b)}if(this.tag)for(e=0;e<this.B.length;e++){var f=this.B[e];d=this.tag.get(this.T[e]);let k=C();if("function"===typeof f){if(f=f(c),!f)continue}else{var g=
f.I;if(g&&!g(c))continue;f.constructor===String&&(f=""+f);f=J(c,f)}if(d&&f){E(f)&&(f=[f]);for(let h=0,l,m;h<f.length;h++)l=f[h],k[l]||(k[l]=1,(g=d.get(l))?m=g:d.set(l,m=[]),b&&m.includes(a)||(m.push(a),this.fastupdate&&((g=this.reg.get(a))?g.push(m):this.reg.set(a,[m]))))}}if(this.store&&(!b||!this.store.has(a))){let k;if(this.A){k=C();for(let h=0,l;h<this.A.length;h++){l=this.A[h];if((b=l.I)&&!b(c))continue;let m;if("function"===typeof l){m=l(c);if(!m)continue;l=[l.U]}else if(E(l)||l.constructor===
String){k[l]=c[l];continue}sa(c,k,l,0,l[0],m)}}this.store.set(a,k||c)}}return this};function sa(a,c,b,e,d,f){a=a[d];if(e===b.length-1)c[d]=f||a;else if(a)if(a.constructor===Array)for(c=c[d]=Array(a.length),d=0;d<a.length;d++)sa(a,c,b,e,d);else c=c[d]||(c[d]=C()),d=b[++e],sa(a,c,b,e,d)}
function ra(a,c,b,e,d,f,g,k){if(a=a[g])if(e===c.length-1){if(a.constructor===Array){if(b[e]){for(c=0;c<a.length;c++)d.add(f,a[c],!0,!0);return}a=a.join(" ")}d.add(f,a,k,!0)}else if(a.constructor===Array)for(g=0;g<a.length;g++)ra(a,c,b,e,d,f,g,k);else g=c[++e],ra(a,c,b,e,d,f,g,k)};function ta(a,c,b,e,d){const f=a.length;let g=[],k,h;k=C();for(let l=0,m,n,t,p;l<c;l++)for(let q=0;q<f;q++)if(t=a[q],l<t.length&&(m=t[l]))for(let y=0;y<m.length;y++)n=m[y],(h=k[n])?k[n]++:(h=0,k[n]=1),p=g[h]||(g[h]=[]),p.push(n);if(a=g.length)if(d)g=1<g.length?ua(g,b,e):(g=g[0]).length>b||e?g.slice(e,b+e):g;else{if(a<f)return[];g=g[a-1];if(b||e)if(g.length>b||e)g=g.slice(e,b+e)}return g}
function ua(a,c,b){const e=[],d=C();let f;var g=a.length;let k;for(let h=g-1;0<=h;h--)if(k=(g=a[h])&&g.length)for(let l=0;l<k;l++)if(f=g[l],!d[f])if(d[f]=1,b)b--;else if(e.push(f),e.length===c)return e;return e}function va(a,c){const b=C(),e=[];for(let d=0,f;d<c.length;d++){f=c[d];for(let g=0;g<f.length;g++)b[f[g]]=1}for(let d=0,f;d<a.length;d++)f=a[d],b[f]&&(e.push(f),b[f]=0);return e};function S(a,c,b,e){if(!a.length)return a;if(1===a.length)return a=a[0],a=b||a.length>c?c?a.slice(b,b+c):a.slice(b):a,e?T.call(this,a):a;let d=[];for(let f=0,g,k;f<a.length;f++)if((g=a[f])&&(k=g.length)){if(b){if(b>=k){b-=k;continue}b<k&&(g=c?g.slice(b,b+c):g.slice(b),k=g.length,b=0)}k>c&&(g=g.slice(0,c),k=c);if(!d.length&&k>=c)return e?T.call(this,g):g;d.push(g);c-=k;if(!c)break}d=1<d.length?[].concat.apply([],d):d[0];return e?T.call(this,d):d};function U(a,c,b){var e=b[0];if(e.then)return Promise.all(b).then(function(m){return a[c].apply(a,m)});if(e[0]&&e[0].index)return a[c].apply(a,e);e=[];let d=[],f=0,g=0,k,h,l;for(let m=0,n;m<b.length;m++)if(n=b[m]){let t;if(n.constructor===V)t=n.result;else if(n.constructor===Array)t=n;else if(f=n.limit||0,g=n.offset||0,l=n.suggest,h=n.resolve,k=n.enrich&&h,n.index)n.resolve=!1,t=n.index.search(n).result,n.resolve=h;else if(n.and)t=a.and(n.and);else if(n.or)t=a.or(n.or);else if(n.xor)t=a.xor(n.xor);
else if(n.not)t=a.not(n.not);else continue;if(t.then)d.push(t);else if(t.length)e[m]=t;else if(!l&&("and"===c||"xor"===c)){e=[];break}}return{O:e,P:d,limit:f,offset:g,enrich:k,resolve:h,suggest:l}};V.prototype.or=function(){const {O:a,P:c,limit:b,offset:e,enrich:d,resolve:f}=U(this,"or",arguments);return wa.call(this,a,c,b,e,d,f)};function wa(a,c,b,e,d,f){if(c.length){const g=this;return Promise.all(c).then(function(k){a=[];for(let h=0,l;h<k.length;h++)(l=k[h]).length&&(a[h]=l);return wa.call(g,a,[],b,e,d,f)})}a.length&&(this.result.length&&a.push(this.result),2>a.length?this.result=a[0]:(this.result=ua(a,b,e),e=0));return f?this.resolve(b,e,d):this};V.prototype.and=function(){let a=this.result.length,c,b,e,d;if(!a){const f=arguments[0];f&&(a=!!f.suggest,d=f.resolve,c=f.limit,b=f.offset,e=f.enrich&&d)}if(a){const {O:f,P:g,limit:k,offset:h,enrich:l,resolve:m,suggest:n}=U(this,"and",arguments);return xa.call(this,f,g,k,h,l,m,n)}return d?this.resolve(c,b,e):this};
function xa(a,c,b,e,d,f,g){if(c.length){const k=this;return Promise.all(c).then(function(h){a=[];for(let l=0,m;l<h.length;l++)(m=h[l]).length&&(a[l]=m);return xa.call(k,a,[],b,e,d,f,g)})}if(a.length)if(this.result.length&&a.unshift(this.result),2>a.length)this.result=a[0];else{if(c=aa(a))return this.result=ta(a,c,b,e,g),f?d?T.call(this.index,this.result):this.result:this;this.result=[]}else g||(this.result=a);return f?this.resolve(b,e,d):this};V.prototype.xor=function(){const {O:a,P:c,limit:b,offset:e,enrich:d,resolve:f,suggest:g}=U(this,"xor",arguments);return ya.call(this,a,c,b,e,d,f,g)};
function ya(a,c,b,e,d,f,g){if(c.length){const k=this;return Promise.all(c).then(function(h){a=[];for(let l=0,m;l<h.length;l++)(m=h[l]).length&&(a[l]=m);return ya.call(k,a,[],b,e,d,f,g)})}if(a.length)if(this.result.length&&a.unshift(this.result),2>a.length)this.result=a[0];else return this.result=za.call(this,a,b,e,f,this.h),f?d?T.call(this.index,this.result):this.result:this;else g||(this.result=a);return f?this.resolve(b,e,d):this}
function za(a,c,b,e,d){const f=[],g=C();let k=0;for(let h=0,l;h<a.length;h++)if(l=a[h]){k<l.length&&(k=l.length);for(let m=0,n;m<l.length;m++)if(n=l[m])for(let t=0,p;t<n.length;t++)p=n[t],g[p]=g[p]?2:1}for(let h=0,l,m=0;h<k;h++)for(let n=0,t;n<a.length;n++)if(t=a[n])if(l=t[h])for(let p=0,q;p<l.length;p++)if(q=l[p],1===g[q])if(b)b--;else if(e){if(f.push(q),f.length===c)return f}else{const y=h+(n?d:0);f[y]||(f[y]=[]);f[y].push(q);if(++m===c)return f}return f};V.prototype.not=function(){const {O:a,P:c,limit:b,offset:e,enrich:d,resolve:f,suggest:g}=U(this,"not",arguments);return Aa.call(this,a,c,b,e,d,f,g)};function Aa(a,c,b,e,d,f,g){if(c.length){const k=this;return Promise.all(c).then(function(h){a=[];for(let l=0,m;l<h.length;l++)(m=h[l]).length&&(a[l]=m);return Aa.call(k,a,[],b,e,d,f,g)})}if(a.length&&this.result.length)this.result=Ba.call(this,a,b,e,f);else if(f)return this.resolve(b,e,d);return f?d?T.call(this.index,this.result):this.result:this}
function Ba(a,c,b,e){const d=[];a=new Set(a.flat().flat());for(let f=0,g,k=0;f<this.result.length;f++)if(g=this.result[f])for(let h=0,l;h<g.length;h++)if(l=g[h],!a.has(l))if(b)b--;else if(e){if(d.push(l),d.length===c)return d}else if(d[f]||(d[f]=[]),d[f].push(l),++k===c)return d;return d};function V(a){if(!this||this.constructor!==V)return new V(a);if(a&&a.index)return a.resolve=!1,this.index=a.index,this.h=a.boost||0,this.result=a.index.search(a).result,this;this.index=null;this.result=a||[];this.h=0}V.prototype.limit=function(a){if(this.result.length){const c=[];for(let b=0,e;b<this.result.length;b++)if(e=this.result[b])if(e.length<=a){if(c[b]=e,a-=e.length,!a)break}else{c[b]=e.slice(0,a);break}this.result=c}return this};
V.prototype.offset=function(a){if(this.result.length){const c=[];for(let b=0,e;b<this.result.length;b++)if(e=this.result[b])e.length<=a?a-=e.length:(c[b]=e.slice(a),a=0);this.result=c}return this};V.prototype.boost=function(a){this.h+=a;return this};V.prototype.resolve=function(a,c,b){const e=this.result,d=this.index;this.result=this.index=null;return e.length?("object"===typeof a&&(b=a.enrich,c=a.offset,a=a.limit),S.call(d,e,a||100,c,b)):e};C();R.prototype.search=function(a,c,b,e){b||(!c&&H(a)?(b=a,a=""):H(c)&&(b=c,c=0));let d=[];var f=[];let g,k,h,l,m,n,t=0,p,q;if(b){b.constructor===Array&&(b={index:b});a=b.query||a;var y=b.pluck;k=b.merge;l=y||b.field||(l=b.index)&&(l.index?null:l);m=this.tag&&b.tag;h=b.suggest;p=!0;g=this.store&&b.enrich&&p;q=b.highlight&&g;c=b.limit||c;n=b.offset||0;c||(c=100);if(m){m.constructor!==Array&&(m=[m]);var w=[];for(let x=0,r;x<m.length;x++)if(r=m[x],r.field&&r.tag){var u=r.tag;if(u.constructor===Array)for(var z=
0;z<u.length;z++)w.push(r.field,u[z]);else w.push(r.field,u)}else{u=Object.keys(r);for(let D=0,F,A;D<u.length;D++)if(F=u[D],A=r[F],A.constructor===Array)for(z=0;z<A.length;z++)w.push(F,A[z]);else w.push(F,A)}m=w;if(!a){e=[];if(w.length)for(f=0;f<w.length;f+=2)y=Ca.call(this,w[f],w[f+1],c,n,g),d.push({field:w[f],tag:w[f+1],result:y});return e.length?Promise.all(e).then(function(x){for(let r=0;r<x.length;r++)d[r].result=x[r];return d}):d}}l&&l.constructor!==Array&&(l=[l])}l||(l=this.field);w=!e&&(this.worker||
this.db)&&[];for(let x=0,r,D,F;x<l.length;x++){D=l[x];let A;E(D)||(A=D,D=A.field,a=A.query||a,c=A.limit||c,n=A.offset||n,h=A.suggest||h,g=this.store&&(A.enrich||g));if(e)r=e[x];else if(u=A||b,z=this.index.get(D),m&&(u.enrich=!1),w){w[x]=z.search(a,c,u);u&&g&&(u.enrich=g);continue}else r=z.search(a,c,u),u&&g&&(u.enrich=g);F=r&&(p?r.length:r.result.length);if(m&&F){u=[];z=0;for(let I=0,G,Oa;I<m.length;I+=2){G=this.tag.get(m[I]);if(!G)if(h)continue;else return p?d:new V(d);if(Oa=(G=G&&G.get(m[I+1]))&&
G.length)z++,u.push(G);else if(!h)return p?d:new V(d)}if(z){r=va(r,u);F=r.length;if(!F&&!h)return p?r:new V(r);z--}}if(F)f[t]=D,d.push(r),t++;else if(1===l.length)return p?d:new V(d)}if(w){const x=this;return Promise.all(w).then(function(r){return r.length?x.search(a,c,b,r):r})}if(!t)return p?d:new V(d);if(y&&(!g||!this.store))return d[0];w=[];for(let x=0,r;x<f.length;x++){r=d[x];g&&r.length&&!r[0].doc&&(r=T.call(this,r));if(y)return p?r:new V(r);d[x]={field:f[x],result:r}}return k?Da(d,c):q?Ea(d,
a,this.index,this.field,this.C,q):d};
function Ea(a,c,b,e,d,f){let g,k,h;for(let m=0,n,t,p,q,y;m<a.length;m++){n=a[m].result;t=a[m].field;q=b.get(t);p=q.encoder;h=q.tokenize;y=d[e.indexOf(t)];p!==g&&(g=p,k=g.encode(c));for(let w=0;w<n.length;w++){let u="";var l=J(n[w].doc,y);let z=g.encode(l);l=l.split(g.split);for(let x=0,r,D;x<z.length;x++){r=z[x];D=l[x];let F;for(let A=0,I;A<k.length;A++)if(I=k[A],"strict"===h){if(r===I){u+=(u?" ":"")+f.replace("$1",D);F=!0;break}}else{const G=r.indexOf(I);if(-1<G){u+=(u?" ":"")+D.substring(0,G)+f.replace("$1",
D.substring(G,I.length))+D.substring(G+I.length);F=!0;break}}F||(u+=(u?" ":"")+l[x])}n[w].highlight=u}}return a}function Da(a,c){const b=[],e=C();for(let d=0,f,g;d<a.length;d++){f=a[d];g=f.result;for(let k=0,h,l,m;k<g.length;k++)if(l=g[k],h=l.id,m=e[h])m.push(f.field);else{if(b.length===c)return b;l.field=e[h]=[f.field];b.push(l)}}return b}function Ca(a,c,b,e,d){a=this.tag.get(a);if(!a)return[];if((c=(a=a&&a.get(c))&&a.length-e)&&0<c){if(c>b||e)a=a.slice(e,e+b);d&&(a=T.call(this,a));return a}}
function T(a){if(!this||!this.store)return a;const c=Array(a.length);for(let b=0,e;b<a.length;b++)e=a[b],c[b]={id:e,doc:this.store.get(e)};return c};function R(a){if(!this||this.constructor!==R)return new R(a);const c=a.document||a.doc||a;var b;this.C=[];this.field=[];this.J=[];this.key=(b=c.key||c.id)&&W(b,this.J)||"id";this.reg=(this.fastupdate=!!a.fastupdate)?new Map:new Set;this.A=(b=c.store||null)&&b&&!0!==b&&[];this.store=b&&new Map;this.cache=(b=a.cache||null)&&new X(b);a.cache=!1;b=new Map;let e=c.index||c.field||c;E(e)&&(e=[e]);for(let d=0,f,g;d<e.length;d++)f=e[d],E(f)||(g=f,f=f.field),g=H(g)?Object.assign({},a,g):a,b.set(f,new Y(g,
this.reg)),g.custom?this.C[d]=g.custom:(this.C[d]=W(f,this.J),g.filter&&("string"===typeof this.C[d]&&(this.C[d]=new String(this.C[d])),this.C[d].I=g.filter)),this.field[d]=f;if(this.A){a=c.store;E(a)&&(a=[a]);for(let d=0,f,g;d<a.length;d++)f=a[d],g=f.field||f,f.custom?(this.A[d]=f.custom,f.custom.U=g):(this.A[d]=W(g,this.J),f.filter&&("string"===typeof this.A[d]&&(this.A[d]=new String(this.A[d])),this.A[d].I=f.filter))}this.index=b;this.tag=null;if(b=c.tag)if("string"===typeof b&&(b=[b]),b.length){this.tag=
new Map;this.B=[];this.T=[];for(let d=0,f,g;d<b.length;d++){f=b[d];g=f.field||f;if(!g)throw Error("The tag field from the document descriptor is undefined.");f.custom?this.B[d]=f.custom:(this.B[d]=W(g,this.J),f.filter&&("string"===typeof this.B[d]&&(this.B[d]=new String(this.B[d])),this.B[d].I=f.filter));this.T[d]=g;this.tag.set(g,new Map)}}}
function W(a,c){const b=a.split(":");let e=0;for(let d=0;d<b.length;d++)a=b[d],"]"===a[a.length-1]&&(a=a.substring(0,a.length-2))&&(c[e]=!0),a&&(b[e++]=a);e<b.length&&(b.length=e);return 1<e?b:b[0]}v=R.prototype;v.append=function(a,c){return this.add(a,c,!0)};v.update=function(a,c){return this.remove(a).add(a,c)};
v.remove=function(a){H(a)&&(a=J(a,this.key));for(var c of this.index.values())c.remove(a,!0);if(this.reg.has(a)){if(this.tag&&!this.fastupdate)for(let b of this.tag.values())for(let e of b){c=e[0];const d=e[1],f=d.indexOf(a);-1<f&&(1<d.length?d.splice(f,1):b.delete(c))}this.store&&this.store.delete(a);this.reg.delete(a)}this.cache&&this.cache.remove(a);return this};
v.clear=function(){for(const a of this.index.values())a.clear();if(this.tag)for(const a of this.tag.values())a.clear();this.store&&this.store.clear();return this};v.contain=function(a){return this.reg.has(a)};v.cleanup=function(){for(const a of this.index.values())a.cleanup();return this};v.get=function(a){return this.store.get(a)};v.set=function(a,c){this.store.set(a,c);return this};v.searchCache=Fa;
v.export=function(a,c,b=0,e=0){if(b<this.field.length){const g=this.field[b];if((c=this.index.get(g).export(a,g,b,e=1))&&c.then){const k=this;return c.then(function(){return k.export(a,g,b+1)})}return this.export(a,g,b+1)}let d,f;switch(e){case 0:d="reg";f=pa(this.reg);c=null;break;case 1:d="tag";f=na(this.tag,this.reg.size);c=null;break;case 2:d="doc";f=la(this.store);c=null;break;case 3:d="cfg";c=f=null;break;default:return}return Q.call(this,a,c,d,f,b,e)};
v.import=function(a,c){if(c){"string"===typeof c&&(c=JSON.parse(c));a=a.split(".");"json"===a[a.length-1]&&a.pop();var b=2<a.length?a[0]:"";a=2<a.length?a[2]:a[1];if(b)return this.index.get(b).import(a,c);switch(a){case "reg":this.fastupdate=!1;this.reg=qa(c,this.reg);for(let e=0,d;e<this.field.length;e++)d=this.index.get(this.field[e]),d.fastupdate=!1,d.reg=this.reg;break;case "tag":this.tag=oa(c,this.tag);break;case "doc":this.store=ma(c,this.store)}}};ia(R.prototype);function Fa(a,c,b){a=("object"===typeof a?""+a.query:a).toLowerCase();this.cache||(this.cache=new X);let e=this.cache.get(a);if(!e){e=this.search(a,c,b);if(e.then){const d=this;e.then(function(f){d.cache.set(a,f);return f})}this.cache.set(a,e)}return e}function X(a){this.limit=a&&!0!==a?a:1E3;this.cache=new Map;this.h=""}X.prototype.set=function(a,c){this.cache.set(this.h=a,c);this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};
X.prototype.get=function(a){const c=this.cache.get(a);c&&this.h!==a&&(this.cache.delete(a),this.cache.set(this.h=a,c));return c};X.prototype.remove=function(a){for(const c of this.cache){const b=c[0];c[1].includes(a)&&this.cache.delete(b)}};X.prototype.clear=function(){this.cache.clear();this.h=""};const Ga={normalize:function(a){return a.toLowerCase()}};const Ha=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]);const Ia=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["pf","f"]]),Ja=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/([^0-9])\1+/g,"$1"];const Ka={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,"\u00df":2,d:3,t:3,l:4,m:5,n:5,r:6};const La=/[\x00-\x7F]+/g;const Ma=/[\x00-\x7F]+/g;const Na=/[\x00-\x7F]+/g;var Pa={LatinExact:{normalize:!1,dedupe:!1},LatinDefault:Ga,LatinSimple:{normalize:!0,dedupe:!0},LatinBalance:{normalize:!0,dedupe:!0,mapper:Ha},LatinAdvanced:{normalize:!0,dedupe:!0,mapper:Ha,matcher:Ia,replacer:Ja},LatinExtra:{normalize:!0,dedupe:!0,mapper:Ha,replacer:Ja.concat([/(?!^)[aeo]/g,""]),matcher:Ia},LatinSoundex:{normalize:!0,dedupe:!1,include:{letter:!0},finalize:function(a){for(let b=0;b<a.length;b++){var c=a[b];let e=c.charAt(0),d=Ka[e];for(let f=1,g;f<c.length&&(g=c.charAt(f),"h"===
g||"w"===g||!(g=Ka[g])||g===d||(e+=g,d=g,4!==e.length));f++);a[b]=e}}},ArabicDefault:{rtl:!0,normalize:!1,dedupe:!0,prepare:function(a){return(""+a).replace(La," ")}},CjkDefault:{normalize:!1,dedupe:!0,split:"",prepare:function(a){return(""+a).replace(Ma,"")}},CyrillicDefault:{normalize:!1,dedupe:!0,prepare:function(a){return(""+a).replace(Na," ")}}};const Qa={memory:{resolution:1},performance:{resolution:6,fastupdate:!0,context:{depth:1,resolution:3}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:9}}};Y.prototype.add=function(a,c,b,e){if(c&&(a||0===a)){if(!e&&!b&&this.reg.has(a))return this.update(a,c);c=this.encoder.encode(c);if(e=c.length){const l=C(),m=C(),n=this.depth,t=this.resolution;for(let p=0;p<e;p++){let q=c[this.rtl?e-1-p:p];var d=q.length;if(d&&(n||!m[q])){var f=this.score?this.score(c,q,p,null,0):Ra(t,e,p),g="";switch(this.tokenize){case "full":if(2<d){for(f=0;f<d;f++)for(var k=d;k>f;k--){g=q.substring(f,k);var h=this.score?this.score(c,q,p,g,f):Ra(t,e,p,d,f);Z(this,m,g,h,a,b)}break}case "reverse":if(1<
d){for(k=d-1;0<k;k--)g=q[k]+g,h=this.score?this.score(c,q,p,g,k):Ra(t,e,p,d,k),Z(this,m,g,h,a,b);g=""}case "forward":if(1<d){for(k=0;k<d;k++)g+=q[k],Z(this,m,g,f,a,b);break}default:if(Z(this,m,q,f,a,b),n&&1<e&&p<e-1)for(d=C(),g=this.S,f=q,k=Math.min(n+1,e-p),d[f]=1,h=1;h<k;h++)if((q=c[this.rtl?e-1-p-h:p+h])&&!d[q]){d[q]=1;const y=this.score?this.score(c,f,p,q,h):Ra(g+(e/2>g?0:1),e,p,k-1,h-1),w=this.bidirectional&&q>f;Z(this,l,w?f:q,y,a,b,w?q:f)}}}}this.fastupdate||this.reg.add(a)}}return this};
function Z(a,c,b,e,d,f,g){let k=g?a.ctx:a.map,h;if(!c[b]||g&&!(h=c[b])[g])g?(c=h||(c[b]=C()),c[g]=1,(h=k.get(g))?k=h:k.set(g,k=new Map)):c[b]=1,(h=k.get(b))?k=h:k.set(b,k=[]),k=k[e]||(k[e]=[]),f&&k.includes(d)||(k.push(d),a.fastupdate&&((c=a.reg.get(d))?c.push(k):a.reg.set(d,[k])))}function Ra(a,c,b,e,d){return b&&1<a?c+(e||0)<=a?b+(d||0):(a-1)/(c+(e||0))*(b+(d||0))+1|0:0};Y.prototype.search=function(a,c,b){b||(!c&&H(a)?(b=a,a=""):H(c)&&(b=c,c=0));var e=[],d=0;if(b){a=b.query||a;c=b.limit||c;d=b.offset||0;var f=b.context;var g=b.suggest;var k=!0;var h=b.resolution}else k=!0;a=this.encoder.encode(a);b=a.length;c=c||(k?100:0);if(1===b)return g=c,(c=Sa(this,a[0],""))&&c.length?S.call(this,c,g,d):[];f=this.depth&&!1!==f;if(2===b&&f&&!g)return g=c,(c=Sa(this,a[0],a[1]))&&c.length?S.call(this,c,g,d):[];k=C();let l=0;if(1<b&&f){var m=a[0];l=1}h||0===h||(h=m?this.S:this.resolution);
for(let q,y;l<b;l++){if((y=a[l])&&!k[y]){k[y]=1;q=Sa(this,y,m);a:{f=q;var n=e,t=g,p=h;let w=[];if(f&&f.length){if(f.length<=p){n.push(f);q=void 0;break a}for(let u=0,z;u<p;u++)if(z=f[u])w[u]=z;if(w.length){n.push(w);q=void 0;break a}}q=t?void 0:w}if(q){e=q;break}m&&(g&&q&&e.length||(m=y))}g&&m&&l===b-1&&!e.length&&(m="",l=-1,k=C())}a:{a=e;e=a.length;m=a;if(1<e)m=ta(a,h,c,d,g);else if(1===e){g=S.call(null,a[0],c,d);break a}g=m}return g};
function Sa(a,c,b){let e;b&&(e=a.bidirectional&&c>b)&&(e=b,b=c,c=e);a=b?(a=a.ctx.get(b))&&a.get(c):a.map.get(c);return a};Y.prototype.remove=function(a,c){const b=this.reg.size&&(this.fastupdate?this.reg.get(a):this.reg.has(a));if(b){if(this.fastupdate)for(let e=0,d;e<b.length;e++){if(d=b[e])if(2>d.length)d.pop();else{const f=d.indexOf(a);f===b.length-1?d.pop():d.splice(f,1)}}else Ta(this.map,a),this.depth&&Ta(this.ctx,a);c||this.reg.delete(a)}this.cache&&this.cache.remove(a);return this};
function Ta(a,c){let b=0;if(a.constructor===Array)for(let e=0,d,f;e<a.length;e++){if((d=a[e])&&d.length)if(f=d.indexOf(c),0<=f){1<d.length?(d.splice(f,1),b++):delete a[e];break}else b++}else for(let e of a.entries()){const d=e[0],f=Ta(e[1],c);f?b+=f:a.delete(d)}return b};function Y(a,c){if(!this||this.constructor!==Y)return new Y(a);if(a){var b=E(a)?a:a.preset;b&&(a=Object.assign({},Qa[b],a))}else a={};b=a.context;const e=!0===b?{depth:1}:b||{},d=E(a.encoder)?Pa[a.encoder]:a.encode||a.encoder||Ga;this.encoder=d.encode?d:"object"===typeof d?new K(d):{encode:d};this.resolution=a.resolution||9;this.tokenize=(b=a.tokenize)&&"default"!==b&&b||"strict";this.depth="strict"===b&&e.depth||0;this.bidirectional=!1!==e.bidirectional;this.fastupdate=!!a.fastupdate;this.score=
a.score||null;b=!1;this.map=new Map;this.ctx=new Map;this.reg=c||(this.fastupdate?new Map:new Set);this.S=e.resolution||3;this.rtl=d.rtl||a.rtl||!1;this.cache=(b=a.cache||null)&&new X(b);this.priority=a.priority||4}v=Y.prototype;v.clear=function(){this.map.clear();this.ctx.clear();this.reg.clear();this.cache&&this.cache.clear();return this};v.append=function(a,c){return this.add(a,c,!0)};v.contain=function(a){return this.reg.has(a)};
v.update=function(a,c){const b=this,e=this.remove(a);return e&&e.then?e.then(()=>b.add(a,c)):this.add(a,c)};function Ua(a){let c=0;if(a.constructor===Array)for(let b=0,e;b<a.length;b++)(e=a[b])&&(c+=e.length);else for(const b of a){const e=b[0],d=Ua(b[1]);d?c+=d:a.delete(e)}return c}v.cleanup=function(){if(!this.fastupdate)return this;Ua(this.map);this.depth&&Ua(this.ctx);return this};v.searchCache=Fa;
v.export=function(a,c,b=0,e=0){let d,f;switch(e){case 0:d="reg";f=pa(this.reg);break;case 1:d="cfg";f=null;break;case 2:d="map";f=la(this.map,this.reg.size);break;case 3:d="ctx";f=na(this.ctx,this.reg.size);break;default:return}return Q.call(this,a,c,d,f,b,e)};
v.import=function(a,c){if(c)switch("string"===typeof c&&(c=JSON.parse(c)),a=a.split("."),"json"===a[a.length-1]&&a.pop(),a=1<a.length?a[1]:a[0],a){case "reg":this.fastupdate=!1;this.reg=qa(c,this.reg);break;case "map":this.map=ma(c,this.map);break;case "ctx":this.ctx=oa(c,this.ctx)}};
v.serialize=function(a=!0){if(!this.reg.size)return"";let c="",b="";for(var e of this.reg.keys())b||(b=typeof e),c+=(c?",":"")+("string"===b?'"'+e+'"':e);c="index.reg=new Set(["+c+"]);";e="";for(var d of this.map.entries()){var f=d[0],g=d[1],k="";for(let m=0,n;m<g.length;m++){n=g[m]||[""];var h="";for(var l=0;l<n.length;l++)h+=(h?",":"")+("string"===b?'"'+n[l]+'"':n[l]);h="["+h+"]";k+=(k?",":"")+h}k='["'+f+'",['+k+"]]";e+=(e?",":"")+k}e="index.map=new Map(["+e+"]);";d="";for(const m of this.ctx.entries()){f=
m[0];g=m[1];for(const n of g.entries()){g=n[0];k=n[1];h="";for(let t=0,p;t<k.length;t++){p=k[t]||[""];l="";for(let q=0;q<p.length;q++)l+=(l?",":"")+("string"===b?'"'+p[q]+'"':p[q]);l="["+l+"]";h+=(h?",":"")+l}h='new Map([["'+g+'",['+h+"]]])";h='["'+f+'",'+h+"]";d+=(d?",":"")+h}}d="index.ctx=new Map(["+d+"]);";return a?"function inject(index){"+c+e+d+"}":c+e+d};ia(Y.prototype);export default {Index:Y,Charset:Pa,Encoder:K,Document:R,Worker:null,Resolver:null,IndexedDB:null,Language:{}};
export const Index=Y;export const Charset=Pa;export const Encoder=K;export const Document=R;export const Worker=null;export const Resolver=null;export const IndexedDB=null;export const Language={};